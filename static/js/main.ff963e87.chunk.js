(this["webpackJsonpcreate-react-app-typescript-redux"]=this["webpackJsonpcreate-react-app-typescript-redux"]||[]).push([[0],{145:function(e,t,n){e.exports=n(251)},251:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"BuildActions",(function(){return D})),n.d(r,"initBuildData",(function(){return R}));var a={};n.r(a),n.d(a,"Actions",(function(){return _})),n.d(a,"initFavourite",(function(){return G})),n.d(a,"toggleFavourite",(function(){return B}));var c={};n.r(c),n.d(c,"Actions",(function(){return de})),n.d(c,"toggleFilter",(function(){return ge})),n.d(c,"setTerm",(function(){return ve})),n.d(c,"setCategoryFilter",(function(){return he}));var o=n(0),i=n(9),l=n(59),u=n(14),s=n(115),d=n(12),m=n(135),f=n(305),p=n(306),b=n(307),E=n(254),g=n(311),v=n(312),h=n(130),O=n.n(h),j=n(255),y=n(66),x=n(286),T=n(134),I=n(285),w=Object(T.a)({palette:{primary:{light:"#e5e5e5",main:"#727272",dark:"#363839",contrastText:"#fff"},secondary:{light:"#005AE1",main:"#0F3287",dark:"#051E2D",contrastText:"#fff"},type:"dark"}});var D,S=n(136),L=n(16);function k(e,t){var n=Object(u.b)();return Object(o.useMemo)((function(){return Array.isArray(e)?e.map((function(e){return Object(L.bindActionCreators)(e,n)})):Object(L.bindActionCreators)(e,n)}),t?[n].concat(Object(S.a)(t)):t)}!function(e){e.LOADING_BUILDS="LOADING_BUILDS",e.BUILD_LOADED="BUILD_LOADED"}(D||(D={}));var A,F,N,_,R=(A="buildData",F=D.LOADING_BUILDS,N=D.BUILD_LOADED,function(){return function(e){e({type:F}),fetch("/travis-dashboard"+"/".concat(A,".json"),{method:"GET"}).then((function(e){return e.json().then((function(t){return{json:t,lastModified:e.headers.has("last-modified")?new Date(e.headers.get("last-modified")):void 0}}))})).then((function(t){return e({type:N,payload:t})}))}});!function(e){e.INIT_FAV="INIT_FAV"}(_||(_={}));function C(){var e=localStorage.getItem("FAVOURITES");return(null===e||void 0===e?void 0:e.split(","))||[]}function G(){return{type:_.INIT_FAV,payload:C()}}function B(e){var t=C(),n=t.indexOf(e);return-1===n?t.push(e):t.splice(n,1),localStorage.setItem("FAVOURITES",t.join(",")),console.dir(t),{type:_.INIT_FAV,payload:t}}var M=n(17),U=n(289),H=n(290),P=n(253),V=n(291),z=n(292),Y=n(293),W=n(119),q=n.n(W),J=n(120),$=n.n(J),K=n(121),Q=n.n(K),X=n(122),Z=n.n(X),ee=n(288),te=n(116),ne={failed:"#FE6B8B",errored:"#FE6B8B",passed:"#61b047",running:"#fede6b",created:"#fede6b",started:"#fede6b",expired:"#6b8bfe",canceled:"#ad495e"},re={errored:"contained",failed:"contained",passed:"outlined",created:"contained",started:"contained",running:"contained"};function ae(e){var t=e.module,n=e.branch,r=e.build,a=r.id,c=r.state,i=ce({state:c});return o.createElement(ee.a,{href:"https://travis-ci.com/github/".concat(t,"/builds/").concat(a),variant:re[c],className:i.branchBtn},n)}var ce=Object(te.a)({branchBtn:function(e){var t=function(e,t,n){return n[t[e]]}("state",e,ne);return{margin:"0 8px 8px 0",flexGrow:1,background:t,textDecoration:"none","&:hover":{background:t}}}}),oe=n(42),ie=["failed","canceled","expired","running","passed"],le=function(e,t,n){return n[t[e]]},ue=Object(j.a)({legend:function(e){return{background:le("state",e,ne),width:24,height:24,borderRadius:3}}});function se(e){var t=me(),n=Object(u.c)((function(e){return e.builds.lastModified})),r=n?"Fetched ".concat(Math.round(((new Date).getTime()-n.getTime())/1e3/60)," min ago"):"",a=Object(oe.f)();return o.createElement("div",{className:t.root},o.createElement("div",{className:t.drawerHeader}),o.createElement(U.a,null),o.createElement(H.a,null,o.createElement(P.a,{button:!0,onClick:function(){return a.push("/")}},o.createElement(V.a,null,o.createElement(q.a,null)),o.createElement(z.a,{primary:"Builds"})),o.createElement(P.a,{button:!0,onClick:function(){return a.push("/stats")}},o.createElement(V.a,null,o.createElement($.a,null)),o.createElement(z.a,{primary:"Stats"})),o.createElement(P.a,{component:"a",button:!0,href:"https://github.com/maxime-rainville/travis-dashboard/"},o.createElement(V.a,null,o.createElement(Q.a,null)),o.createElement(z.a,{primary:"View Source"})),o.createElement(P.a,{component:"a",button:!0,href:"https://github.com/maxime-rainville/travis-dashboard/actions?query=workflow%3A%22Build+and+Deploy%22"},o.createElement(V.a,null,o.createElement(Z.a,null)),o.createElement(z.a,{primary:"Refresh data",secondary:r}))),o.createElement("div",{className:t.drawerSpacer}),o.createElement(H.a,null,o.createElement(Y.a,null,"Legend"),ie.map((function(e){return o.createElement(P.a,{key:e},o.createElement(V.a,null,o.createElement("span",{className:ue({state:e}).legend})),o.createElement(z.a,{primary:e}))}))))}var de,me=Object(j.a)((function(e){return{drawerHeader:Object(M.a)({},e.mixins.toolbar),drawerPaper:Object(d.a)({width:250,backgroundColor:e.palette.background.default},e.breakpoints.up("md"),{width:240,position:"relative",height:"100%"}),root:{minHeight:"100%",display:"flex",flexDirection:"column"},drawerSpacer:{flexGrow:1}}})),fe=n(298),pe=n(315),be=n(299),Ee=n(300);function ge(){return{type:de.TOGGLE_FILTER}}function ve(e){return function(t){var n=setTimeout((function(){t({type:de.TRIGGER_SEARCH,payload:void 0})}),500);t({type:de.SET_TERM,payload:{term:e,triggerSearchTimeout:n}})}}function he(e){return{type:de.SET_CATEGORY_FILTER,payload:{categoryFilters:e}}}!function(e){e.LOADING_BUILDS="LOADING_BUILDS",e.BUILD_LOADED="BUILD_LOADED",e.TOGGLE_FILTER="TOGGLE_FILTER",e.SET_TERM="SET_TERM",e.TRIGGER_SEARCH="TRIGGER_SEARCH",e.SET_CATEGORY_FILTER="SET_CATEGORY_FILTER"}(de||(de={}));var Oe=n(294),je=n(313),ye=n(308),xe=n(295),Te=n(297),Ie=n(310),we={core:"Core",supported:"Supported",unsupported:"Unsupported",nonmodule:"Non-module"};function De(e){e.className;var t=k(c).setCategoryFilter,n=Object(u.c)((function(e){return e.filters})).categoryFilters,r=Se();return n?o.createElement(Oe.a,{className:r.root},o.createElement(je.a,{id:"demo-mutiple-checkbox-label",color:"secondary"},"Category"),o.createElement(ye.a,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,value:n,onChange:function(e){return t(e.target.value)},input:o.createElement(xe.a,null),renderValue:function(e){return e.map((function(e){return we[e]})).join(", ")}},Object.keys(we).map((function(e){return o.createElement(Te.a,{key:e,value:e},o.createElement(Ie.a,{checked:n.indexOf(e)>-1}),o.createElement(z.a,{primary:we[e]}))})))):null}var Se=Object(te.a)((function(e){return{root:{margin:e.spacing(1),width:200}}}));function Le(e){var t=e.className,n=k(c),r=n.toggleFilter,a=n.setTerm,i=Object(u.c)((function(e){return e.filters})),l=i.filter,s=i.partialTerm,d=ke();return o.createElement(fe.a,{row:!0,className:"".concat(t," ").concat(d.root)},o.createElement(pe.a,{label:"Filter by name",variant:"filled",color:"secondary",onChange:function(e){return a(e.target.value)},className:d.term,value:s}),o.createElement(De,null),o.createElement(be.a,{control:o.createElement(Ee.a,{checked:"latestStable"===l,onChange:r}),label:"Latest only",color:"secondary"}))}var ke=Object(te.a)({term:{flexGrow:1},root:{}}),Ae=n(36),Fe=n(301),Ne=n(302),_e=n(303);var Re=n(125),Ce=n.n(Re),Ge=n(126),Be=n.n(Ge);function Me(e){var t=e.name,n=Ue(),r=function(e){var t=Object(u.c)((function(e){return e.favourites})),n=k(a).toggleFavourite;return{toggle:function(){return n(e)},isFavourite:-1!==t.indexOf(e)}}(t),c=r.isFavourite,i=r.toggle,l=c?Ce.a:Be.a;return o.createElement(ee.a,{className:n.root,onClick:function(e){e.preventDefault(),i()}},o.createElement(l,{fontSize:"small"}))}var Ue=Object(te.a)((function(e){return{root:{minWidth:0}}}));function He(e){var t=e.name,n=e.branches,r=e.state,a=Pe({state:r});return o.createElement(Fe.a,{item:!0,xs:6,sm:4,md:3},o.createElement("a",{href:"https://travis-ci.com/github/".concat(t,"/branches"),style:{textDecoration:"none"}},o.createElement(Ne.a,{className:a.box},o.createElement(_e.a,null,o.createElement(l.a,{gutterBottom:!0,variant:"h6",component:"h2",className:a.modTitle},o.createElement("span",null,t)," ",o.createElement(Me,{name:t})),o.createElement(l.a,{variant:"body2",color:"textSecondary",component:"p"}),"passed"!==r&&o.createElement("div",{className:a.cardActions},Object.keys(n).map((function(e){return o.createElement(ae,{module:t,branch:e,key:e,build:n[e]})})))))))}var Pe=Object(te.a)((function(e){return{box:function(e){return{borderRadius:8,textDecoration:"none",background:"passed"===e.state?"linear-gradient(45deg, #61b047 30%, #00ca99 90%)":void 0}},text:{color:"white"},branchBtn:{margin:"0 8px 8px 0",flexGrow:1},cardActions:{flexWrap:"wrap",display:"flex"},modTitle:{display:"flex",alignItems:"flex-start","& > :first-child":{flexGrow:1}}}})),Ve=n(304),ze=n(127),Ye=n.n(ze);function We(){return o.createElement(l.a,{variant:"h1",style:{textAlign:"center"}},o.createElement(Ye.a,{style:{fontSize:"6rem"}}),o.createElement("br",null),"Oh no! There's no results.")}function qe(e){var t=e.loading,n=e.children,r=e.results,a=Je(),c=Array.isArray(r)?0===r.length:!r;return o.createElement(o.Fragment,null,t||c?o.createElement("div",{className:a.root},t?o.createElement(Ve.a,{size:100}):o.createElement(We,null)):n)}var Je=Object(j.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}}),$e=n(137),Ke=[["errored","failed"],["canceled"],["expired"],["running","created","started"],["passed"]];function Qe(e,t){if(e===t)return 0;var n=!0,r=!1,a=void 0;try{for(var c,o=Ke[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;if(i.indexOf(e)>-1)return-1;if(i.indexOf(t)>-1)return 1}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return 0}function Xe(e,t){var n={},r=Object.keys(e);r.indexOf("master")>-1?n.nextMajor="master":r.indexOf("main")>-1&&(n.nextMajor="main");var a=r.filter((function(e){return e.match(/^\d+$/)})).map((function(e){return parseInt(e)})).reduce((function(e,t){return Math.max(e,t)}),0);if(a){n.nextMinor=a.toString();var c=r.filter((function(e){return e.match(new RegExp("^".concat(a,"\\.\\d+$")))})).map((function(e){return e.replace("".concat(a,"."),"").trim()})).map((function(e){return parseInt(e)})).sort().slice(-2).map((function(e){return"".concat(a,".").concat(e)}));2===c.length?(n.nextPatch=c[1],n.previousPatch=c[0]):1===c.length&&(n.nextPatch=c[0])}return Object.values(n).reduce((function(t,n){return void 0===n?t:Object(M.a)({},t,Object(d.a)({},n,e[n]))}),{})}function Ze(e,t){var n=t.state;return Qe(e,n)>0?n:e}function et(e,t,n,r){return e.filter((function(e){return function(e,t){if(4===t.length)return!0;var n=$e.a.find((function(t){return t.repo===e}));return n?t.indexOf("core")>-1&&n.core||t.indexOf("supported")>-1&&n.supported||t.indexOf("unsupported")>-1&&!n.supported:t.indexOf("nonmodule")>-1}(e.name,n)})).filter((function(e){return-1!==e.name.indexOf(r)})).map((function(e){var n=e.branches,r=Object(Ae.a)(e,["branches"]);return Object(M.a)({branches:"latestStable"===t?Xe(n,r.name):n},r)})).map((function(e){return Object(M.a)({},e,{state:Object.values(e.branches).reduce(Ze,"passed")})})).sort((function(e,t){return function(e,t){if(e===t)return 0;var n=Qe(e.state,t.state);return 0!==n?n:e.name.localeCompare(t.name)}(e,t)}))}function tt(){var e=Object(u.c)((function(e){return e})),t=e.filters,n=t.categoryFilters,r=t.filter,a=t.term,c=e.builds;return Object(M.a)({},c,{modules:Object(o.useMemo)((function(){return et(c.modules,r,n,a)}),[c.modules,n,r,a])})}function nt(){var e=rt(),t=tt(),n=t.modules,r=t.loading,a=function(){var e=Object(u.c)((function(e){var t=e.filters;return{partialTerm:t.partialTerm,term:t.term}}));return e.partialTerm!==e.term}(),c=Object(u.c)((function(e){return{favourites:e.favourites}})).favourites,i=n.filter((function(e){var t=e.name;return c.includes(t)})),l=n.filter((function(e){var t=e.name;return!c.includes(t)}));return o.createElement(qe,{loading:r||a,results:n},o.createElement("div",{className:e.root},i.length>0&&o.createElement(Fe.a,{className:e.centerContainer,container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:3},i.map((function(e){var t=e.name,n=Object(Ae.a)(e,["name"]);return o.createElement(He,Object.assign({key:t,name:t},n))}))),l.length>0&&o.createElement(Fe.a,{className:e.centerContainer,container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:3},l.map((function(e){var t=e.name,n=Object(Ae.a)(e,["name"]);return o.createElement(He,Object.assign({key:t,name:t},n))})))))}var rt=Object(j.a)({root:{textAlign:"center",paddingTop:20,paddingLeft:15,paddingRight:15},centerContainer:{justifyContent:"flex-start",marginBottom:60},button:{marginTop:20}}),at=n(129);var ct=["failed","canceled","expired","running","passed"],ot=ct.map((function(e){return ne[e]}));function it(e){return{labels:ct,datasets:[{data:ct.map((function(t){return e[t]})),backgroundColor:ot}]}}function lt(){var e=ut(),t=function(){var e=tt(),t=e.loading;return{stats:e.modules.reduce((function(e,t){return Object.values(t.branches).forEach((function(t){return e[t.state]++})),e}),{passed:0,errored:0,failed:0,running:0,expired:0,canceled:0,created:0,started:0}),loading:t}}(),n=t.stats,r=t.loading,a=void 0!==Object.values(n).find((function(e){return e>0}));return o.createElement(qe,{loading:r,results:a},o.createElement("div",{className:e.root},o.createElement(at.Doughnut,{data:it(n),legend:!1})))}var ut=Object(j.a)({root:{textAlign:"center",paddingTop:20,paddingLeft:15,paddingRight:15},centerContainer:{},button:{marginTop:20}});function st(){var e=dt();return o.createElement("div",{className:e.root},o.createElement(oe.c,null,o.createElement(oe.a,{exact:!0,path:"/",component:nt}),o.createElement(oe.a,{path:"/home",component:nt}),o.createElement(oe.a,{path:"/stats",component:lt})))}var dt=Object(j.a)((function(e){return{root:Object(d.a)({backgroundColor:e.palette.background.default,overflow:"auto",width:"100%",height:"calc(100% - 56px)",marginTop:56},e.breakpoints.up("sm"),{height:"calc(100% - 64px)",marginTop:64})}}));var mt,ft=Object(j.a)((function(e){return{root:{width:"100%",height:"100%",zIndex:1,overflow:"hidden"},appFrame:{position:"relative",display:"flex",width:"100%",height:"100%"},appBar:{zIndex:e.zIndex.drawer+1,position:"absolute"},appTitle:{flexGrow:.7},appForm:{flexGrow:.3},navIconHide:Object(d.a)({},e.breakpoints.up("md"),{display:"none"}),drawerPaper:Object(d.a)({width:250,backgroundColor:e.palette.background.default},e.breakpoints.up("md"),{width:240,position:"relative",height:"100%"})}})),pt=(mt=function(){var e=k(r),t=k(a).initFavourite;o.useEffect((function(){e.initBuildData(),t()}),[]);var n=ft(),c=o.useState(!0),i=Object(m.a)(c,2),u=i[0],s=i[1],d=Object(f.a)((function(e){return e.breakpoints.down("sm")})),h=function(){s(!u)};return o.createElement(y.a,{basename:"/travis-dashboard"},o.createElement("div",{className:n.root},o.createElement("div",{className:n.appFrame},o.createElement(p.a,{className:n.appBar},o.createElement(b.a,null,o.createElement(E.a,{color:"inherit","aria-label":"open drawer",onClick:h,className:n.navIconHide},o.createElement(O.a,null)),o.createElement(l.a,{variant:"h6",color:"inherit",noWrap:d,className:n.appTitle},"Silverstripe CMS Squad Dashboard"),o.createElement(Le,{className:n.appForm}))),o.createElement(g.a,{mdUp:!0},o.createElement(v.a,{variant:"temporary",anchor:"left",open:u,classes:{paper:n.drawerPaper},onClose:h,ModalProps:{keepMounted:!0}},o.createElement(se,null))),o.createElement(g.a,{smDown:!0},o.createElement(v.a,{variant:"permanent",open:!0,classes:{paper:n.drawerPaper}},o.createElement(se,null))),o.createElement(st,null))))},function(e){return o.createElement(I.a,{theme:w},o.createElement(x.a,null),o.createElement(mt,e))}),bt=n(20),Et=n(131),gt=(n(132),n(133)),vt=n(90),ht=n(89);function Ot(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(r.type)?t[r.type](n,r):n}}var jt,yt={modules:[],loading:!0,stats:{passed:0,errored:0,failed:0,running:0,expired:0,canceled:0,created:0,started:0}};function xt(e){if(!e||"passed"!==e.state)return e;var t=new Date(e.started_at),n=new Date,r=new Date;return r.setDate(n.getDate()-30),t<r?Object(M.a)({},e,{state:"expired"}):e}var Tt,It=Ot(yt,(jt={},Object(d.a)(jt,D.LOADING_BUILDS,(function(){return yt})),Object(d.a)(jt,D.BUILD_LOADED,(function(e,t){var n,r=t.payload,a=r.json,c=r.lastModified;return Object(M.a)({},e,{modules:(n=a,Object.keys(n).map((function(e){return{branches:n[e],name:e}})).map((function(e){var t=e.branches,n=Object(Ae.a)(e,["branches"]);for(var r in t)t[r]=xt(t[r]);return Object(M.a)({branches:t},n)}))),lastModified:c,loading:!1,raw:a})})),jt)),wt=Ot({filter:"latestStable",term:"",partialTerm:"",categoryFilters:["core","nonmodule","supported","unsupported"]},(Tt={},Object(d.a)(Tt,de.TOGGLE_FILTER,(function(e){var t=e.filter,n=Object(Ae.a)(e,["filter"]);return Object(M.a)({},n,{filter:"latestStable"===t?"all":"latestStable"})})),Object(d.a)(Tt,de.SET_TERM,(function(e,t){e.triggerSearchTimeout&&clearTimeout(e.triggerSearchTimeout);var n=t.payload,r=n.term,a=n.triggerSearchTimeout;return Object(M.a)({},e,{partialTerm:r.toLocaleLowerCase(),triggerSearchTimeout:a})})),Object(d.a)(Tt,de.TRIGGER_SEARCH,(function(e){return Object(M.a)({},e,{term:e.partialTerm})})),Object(d.a)(Tt,de.SET_CATEGORY_FILTER,(function(e,t){var n=t.payload.categoryFilters;return Object(M.a)({},e,{categoryFilters:n})})),Tt)),Dt=Ot([],Object(d.a)({},_.INIT_FAV,(function(e,t){return t.payload||[]}))),St={key:"root",version:1,storage:Et,blacklist:[]},Lt=(Object(gt.createLogger)(),Object(bt.a)(),Object(L.applyMiddleware)(ht.a));var kt=Object(vt.a)(St,Object(L.combineReducers)({builds:It,filters:wt,favourites:Dt})),At=function(){var e=Object(L.createStore)(kt,{},Lt);return{store:e,persistor:Object(vt.b)(e)}}(),Ft=At.persistor,Nt=At.store;var _t=document.getElementById("root");i.render(o.createElement((function(){return o.createElement(u.a,{store:Nt},o.createElement(s.a,{loading:o.createElement(l.a,null,"Loading..."),persistor:Ft},o.createElement(pt,null)))}),null),_t)}},[[145,1,2]]]);
//# sourceMappingURL=main.ff963e87.chunk.js.map