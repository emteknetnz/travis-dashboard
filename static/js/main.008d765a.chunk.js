(this["webpackJsonpcreate-react-app-typescript-redux"]=this["webpackJsonpcreate-react-app-typescript-redux"]||[]).push([[0],{105:function(e,t,r){e.exports=r(116)},116:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"initBuildData",(function(){return I})),r.d(a,"toggleFilter",(function(){return R})),r.d(a,"setTerm",(function(){return F})),r.d(a,"setCategoryFilter",(function(){return G}));var n={};r.r(n),r.d(n,"build",(function(){return le}));var c=r(0),o=r(9),i=r(52),l=r(23),u=r(80),d=r(13),s=r(95),m=r(170),p=r(171),f=r(172),b=r(119),E=r(176),h=r(177),g=r(93),v=r.n(g),O=r(120),j=r(65),y=r(151),x=r(94),w=r(150),T=Object(x.a)({palette:{primary:{light:"#e5e5e5",main:"#727272",dark:"#363839",contrastText:"#fff"},secondary:{light:"#005AE1",main:"#0F3287",dark:"#051E2D",contrastText:"#fff"},type:"dark"}});var k,S=r(96),D=r(16);function L(e,t){var r=Object(l.b)();return Object(c.useMemo)((function(){return Array.isArray(e)?e.map((function(e){return Object(D.bindActionCreators)(e,r)})):Object(D.bindActionCreators)(e,r)}),t?[r].concat(Object(S.a)(t)):t)}function I(){return function(e){e({type:k.LOADING_BUILDS}),fetch("/travis-dashboard/buildData.json",{method:"GET"}).then((function(e){return e.json().then((function(t){return{json:t,lastModified:e.headers.has("last-modified")?new Date(e.headers.get("last-modified")):void 0}}))})).then((function(t){return e({type:k.BUILD_LOADED,payload:t})}))}}function R(){return{type:k.TOGGLE_FILTER}}function F(e){return function(t){var r=setTimeout((function(){t({type:k.TRIGGER_SEARCH})}),500);t({type:k.SET_TERM,payload:{term:e,triggerSearchTimeout:r}})}}function G(e){return{type:k.SET_CATEGORY_FILTER,payload:{categoryFilters:e}}}!function(e){e.LOADING_BUILDS="LOADING_BUILDS",e.BUILD_LOADED="BUILD_LOADED",e.TOGGLE_FILTER="TOGGLE_FILTER",e.SET_TERM="SET_TERM",e.TRIGGER_SEARCH="TRIGGER_SEARCH",e.SET_CATEGORY_FILTER="SET_CATEGORY_FILTER"}(k||(k={}));var _=r(15),C=r(154),N=r(155),A=r(118),B=r(156),M=r(157),U=r(158),H=r(87),P=r.n(H),Y=r(88),z=r.n(Y),q=r(89),J=r.n(q),V=r(19),W=r(83),$=(r(84),r(85)),K=r(70),Q=r(67),X=r(47);var Z,ee=r(97),te={modules:[],loading:!0,raw:{},filter:"latestStable",term:"",categoryFilters:["core","nonmodule","supported","unsupported"]},re=[["errored","failed"],["canceled"],["expired"],["running","created","started"],["passed"]];function ae(e,t){if(e===t)return 0;var r=!0,a=!1,n=void 0;try{for(var c,o=re[Symbol.iterator]();!(r=(c=o.next()).done);r=!0){var i=c.value;if(i.indexOf(e)>-1)return-1;if(i.indexOf(t)>-1)return 1}}catch(l){a=!0,n=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}return 0}function ne(e,t){var r={},a=Object.keys(e);a.indexOf("master")>-1?r.nextMajor="master":a.indexOf("main")>-1&&(r.nextMajor="main");var n=a.filter((function(e){return e.match(/^\d+$/)})).map((function(e){return parseInt(e)})).reduce((function(e,t){return Math.max(e,t)}),0);if(n){r.nextMinor=n.toString();var c=a.filter((function(e){return e.match(new RegExp("^".concat(n,"\\.\\d+$")))})).map((function(e){return e.replace("".concat(n,"."),"").trim()})).map((function(e){return parseInt(e)})).sort().slice(-2).map((function(e){return"".concat(n,".").concat(e)}));2===c.length?(r.nextPatch=c[1],r.previousPatch=c[0]):1===c.length&&(r.nextPatch=c[0])}return Object.values(r).reduce((function(t,r){return void 0===r?t:Object(_.a)({},t,Object(d.a)({},r,e[r]))}),{})}function ce(e,t){var r=t.state;return ae(e,r)>0?r:e}function oe(e){if(!e||"passed"!==e.state)return e;var t=new Date(e.started_at),r=new Date,a=new Date;return a.setDate(r.getDate()-30),t<a?Object(_.a)({},e,{state:"expired"}):e}function ie(e,t){var r=t.filter,a=t.term,n=t.categoryFilters;return Object.keys(e).filter((function(e){return function(e,t){if(4===t.length)return!0;var r=ee.a.find((function(t){return t.repo===e}));return r?t.indexOf("core")>-1&&r.core||t.indexOf("supported")>-1&&r.supported||t.indexOf("unsupported")>-1&&!r.supported:t.indexOf("nonmodule")>-1}(e,n)})).map((function(t){return{branches:e[t],name:t}})).filter((function(e){return-1!==e.name.indexOf(a)})).map((function(e){var t=e.branches,a=Object(X.a)(e,["branches"]);return Object(_.a)({branches:"latestStable"===r?ne(t,a.name):t},a)})).map((function(e){var t=e.branches,r=Object(X.a)(e,["branches"]);for(var a in t)t[a]=oe(t[a]);return Object(_.a)({branches:t},r)})).map((function(e){return Object(_.a)({},e,{state:Object.values(e.branches).reduce(ce,"passed")})})).sort((function(e,t){return function(e,t){if(e===t)return 0;var r=ae(e.state,t.state);return 0!==r?r:e.name.localeCompare(t.name)}(e,t)}))}var le=function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(a.type)?t[a.type](r,a):r}}(te,(Z={},Object(d.a)(Z,k.LOADING_BUILDS,(function(){return te})),Object(d.a)(Z,k.BUILD_LOADED,(function(e,t){var r=t.payload,a=r.json,n=r.lastModified;return Object(_.a)({},e,{modules:ie(a,e),lastModified:n,loading:!1,raw:a})})),Object(d.a)(Z,k.TOGGLE_FILTER,(function(e){var t=e.filter,r=Object(X.a)(e,["filter"]),a="latestStable"===t?"all":"latestStable",n=Object(_.a)({},r,{filter:a});return Object(_.a)({},n,{modules:ie(r.raw,n)})})),Object(d.a)(Z,k.SET_TERM,(function(e,t){e.triggerSearchTimeout&&clearTimeout(e.triggerSearchTimeout);var r=t.payload,a=r.term,n=r.triggerSearchTimeout;return Object(_.a)({},e,{term:a.toLocaleLowerCase(),triggerSearchTimeout:n})})),Object(d.a)(Z,k.TRIGGER_SEARCH,(function(e){return Object(_.a)({},e,{modules:ie(e.raw,e)})})),Object(d.a)(Z,k.SET_CATEGORY_FILTER,(function(e,t){var r=t.payload.categoryFilters,a=Object(_.a)({},e,{categoryFilters:r});return Object(_.a)({},a,{modules:ie(e.raw,a)})})),Z)),ue={key:"root",version:1,storage:W,blacklist:[]},de=(Object($.createLogger)(),Object(V.a)()),se=Object(D.applyMiddleware)(Q.a);var me=Object(K.a)(ue,Object(D.combineReducers)(Object(_.a)({},n))),pe=r(153),fe=r(81),be={failed:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",errored:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",passed:"linear-gradient(45deg, #61b047 30%, #00ca99 90%)",running:"linear-gradient(45deg, #fede6b 30%, #8bfe6b 90%)",created:"linear-gradient(45deg, #fede6b 30%, #8bfe6b 90%)",started:"linear-gradient(45deg, #fede6b 30%, #8bfe6b 90%)",expired:"linear-gradient(45deg, #6b8bfe 30%, #de6bfe 90%)",canceled:"linear-gradient(45deg, #ad495e 30%, #ad9749 90%)"},Ee={errored:"contained",failed:"contained",passed:"outlined",created:"contained",started:"contained",running:"contained"};function he(e){var t=e.module,r=e.branch,a=e.build,n=a.id,o=a.state,i=ge({state:o});return c.createElement(pe.a,{href:"https://travis-ci.com/github/".concat(t,"/builds/").concat(n),variant:Ee[o],className:i.branchBtn},r)}var ge=Object(fe.a)({branchBtn:function(e){return{margin:"0 8px 8px 0",flexGrow:1,background:function(e,t,r){return r[t[e]]}("state",e,be),textDecoration:"none"}}}),ve=["failed","canceled","expired","running","passed"],Oe=function(e,t,r){return r[t[e]]},je=Object(O.a)({legend:function(e){return{background:Oe("state",e,be),width:24,height:24,borderRadius:3}}});function ye(e){var t=xe(),r=Object(l.c)((function(e){return e.build.lastModified})),a=r?"Fetched ".concat(Math.round(((new Date).getTime()-r.getTime())/1e3/60)," min ago"):"";return c.createElement("div",{className:t.root},c.createElement("div",{className:t.drawerHeader}),c.createElement(C.a,null),c.createElement(N.a,null,c.createElement(A.a,{button:!0,onClick:function(){return de.push("/")}},c.createElement(B.a,null,c.createElement(P.a,null)),c.createElement(M.a,{primary:"Builds"})),c.createElement(A.a,{component:"a",button:!0,href:"https://github.com/maxime-rainville/travis-dashboard/"},c.createElement(B.a,null,c.createElement(z.a,null)),c.createElement(M.a,{primary:"View Source"})),c.createElement(A.a,{component:"a",button:!0,href:"https://github.com/maxime-rainville/travis-dashboard/actions?query=workflow%3A%22Build+and+Deploy%22"},c.createElement(B.a,null,c.createElement(J.a,null)),c.createElement(M.a,{primary:"Refresh data",secondary:a}))),c.createElement("div",{className:t.drawerSpacer}),c.createElement(N.a,null,c.createElement(U.a,null,"Legend"),ve.map((function(e){return c.createElement(A.a,{key:e},c.createElement(B.a,null,c.createElement("span",{className:je({state:e}).legend})),c.createElement(M.a,{primary:e}))}))))}var xe=Object(O.a)((function(e){return{drawerHeader:Object(_.a)({},e.mixins.toolbar),drawerPaper:Object(d.a)({width:250,backgroundColor:e.palette.background.default},e.breakpoints.up("md"),{width:240,position:"relative",height:"100%"}),root:{minHeight:"100%",display:"flex",flexDirection:"column"},drawerSpacer:{flexGrow:1}}})),we=r(163),Te=r(180),ke=r(164),Se=r(165),De=r(159),Le=r(178),Ie=r(173),Re=r(160),Fe=r(162),Ge=r(175),_e={core:"Core",supported:"Supported",unsupported:"Unsupported",nonmodule:"Non-module"};function Ce(e){e.className;var t=L(a).setCategoryFilter,r=Object(l.c)((function(e){return e.build})).categoryFilters,n=Ne();return r?c.createElement(De.a,{className:n.root},c.createElement(Le.a,{id:"demo-mutiple-checkbox-label",color:"secondary"},"Category"),c.createElement(Ie.a,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,value:r,onChange:function(e){return t(e.target.value)},input:c.createElement(Re.a,null),renderValue:function(e){return e.map((function(e){return _e[e]})).join(", ")}},Object.keys(_e).map((function(e){return c.createElement(Fe.a,{key:e,value:e},c.createElement(Ge.a,{checked:r.indexOf(e)>-1}),c.createElement(M.a,{primary:_e[e]}))})))):null}var Ne=Object(fe.a)((function(e){return{root:{margin:e.spacing(1),width:200}}}));function Ae(e){var t=e.className,r=L(a),n=r.toggleFilter,o=r.setTerm,i=Object(l.c)((function(e){return e.build})).filter,u=Be();return c.createElement(we.a,{row:!0,className:"".concat(t," ").concat(u.root)},c.createElement(Te.a,{label:"Filter by name",variant:"filled",color:"secondary",onChange:function(e){return o(e.target.value)},className:u.term}),c.createElement(Ce,null),c.createElement(ke.a,{control:c.createElement(Se.a,{checked:"latestStable"===i,onChange:n}),label:"Latest only",color:"secondary"}))}var Be=Object(fe.a)({term:{flexGrow:1},root:{}}),Me=r(37),Ue=r(169),He=r(166),Pe=r(167),Ye=r(168);function ze(e){var t=e.name,r=e.branches,a=e.state,n=qe({state:a});return c.createElement(He.a,{item:!0,xs:6,sm:4,md:3},c.createElement("a",{href:"https://travis-ci.com/github/".concat(t,"/branches"),style:{textDecoration:"none"}},c.createElement(Pe.a,{className:n.box},c.createElement(Ye.a,null,c.createElement(i.a,{gutterBottom:!0,variant:"h6",component:"h2"},t),c.createElement(i.a,{variant:"body2",color:"textSecondary",component:"p"}),"passed"!==a&&c.createElement("div",{className:n.cardActions},Object.keys(r).map((function(e){return c.createElement(he,{module:t,branch:e,key:e,build:r[e]})})))))))}var qe=Object(fe.a)((function(e){return{box:function(e){return{borderRadius:8,textDecoration:"none",background:"passed"===e.state?"linear-gradient(45deg, #61b047 30%, #00ca99 90%)":void 0}},text:{color:"white"},branchBtn:{margin:"0 8px 8px 0",flexGrow:1},cardActions:{flexWrap:"wrap",display:"flex"}}}));function Je(){var e=Ve(),t=Object(l.c)((function(e){return e.build})),r=t.modules;return t.loading||!r?c.createElement(Ue.a,null):c.createElement("div",{className:e.root},c.createElement(He.a,{className:e.centerContainer,container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:3},r.map((function(e){var t=e.name,r=Object(X.a)(e,["name"]);return c.createElement(ze,Object.assign({key:t,name:t},r))}))))}var Ve=Object(O.a)({root:{textAlign:"center",paddingTop:20,paddingLeft:15,paddingRight:15},centerContainer:{},button:{marginTop:20}});function We(){var e=$e();return c.createElement("div",{className:e.root},c.createElement(Me.a,{exact:!0,path:"/",component:Je}),c.createElement(Me.a,{exact:!0,path:"/home",component:Je}))}var $e=Object(O.a)((function(e){return{root:Object(d.a)({backgroundColor:e.palette.background.default,overflow:"auto",width:"100%",height:"calc(100% - 56px)",marginTop:56},e.breakpoints.up("sm"),{height:"calc(100% - 64px)",marginTop:64})}}));var Ke,Qe=Object(O.a)((function(e){return{root:{width:"100%",height:"100%",zIndex:1,overflow:"hidden"},appFrame:{position:"relative",display:"flex",width:"100%",height:"100%"},appBar:{zIndex:e.zIndex.drawer+1,position:"absolute"},appTitle:{flexGrow:.7},appForm:{flexGrow:.3},navIconHide:Object(d.a)({},e.breakpoints.up("md"),{display:"none"}),drawerPaper:Object(d.a)({width:250,backgroundColor:e.palette.background.default},e.breakpoints.up("md"),{width:240,position:"relative",height:"100%"})}})),Xe=(Ke=function(){var e=L(a);c.useEffect((function(){e.initBuildData()}),[]);var t=Qe(),r=c.useState(!0),n=Object(s.a)(r,2),o=n[0],l=n[1],u=Object(m.a)((function(e){return e.breakpoints.down("sm")})),d=function(){l(!o)};return c.createElement(j.a,{basename:"/travis-dashboard"},c.createElement("div",{className:t.root},c.createElement("div",{className:t.appFrame},c.createElement(p.a,{className:t.appBar},c.createElement(f.a,null,c.createElement(b.a,{color:"inherit","aria-label":"open drawer",onClick:d,className:t.navIconHide},c.createElement(v.a,null)),c.createElement(i.a,{variant:"h6",color:"inherit",noWrap:u,className:t.appTitle},"Silverstripe CMS Squad dashboard"),c.createElement(Ae,{className:t.appForm}))),c.createElement(E.a,{mdUp:!0},c.createElement(h.a,{variant:"temporary",anchor:"left",open:o,classes:{paper:t.drawerPaper},onClose:d,ModalProps:{keepMounted:!0}},c.createElement(ye,null))),c.createElement(E.a,{smDown:!0},c.createElement(h.a,{variant:"permanent",open:!0,classes:{paper:t.drawerPaper}},c.createElement(ye,null))),c.createElement(We,null))))},function(e){return c.createElement(w.a,{theme:T},c.createElement(y.a,null),c.createElement(Ke,e))}),Ze=function(){var e=Object(D.createStore)(me,{},se);return{store:e,persistor:Object(K.b)(e)}}(),et=Ze.persistor,tt=Ze.store;var rt=document.getElementById("root");o.render(c.createElement((function(){return c.createElement(l.a,{store:tt},c.createElement(u.a,{loading:c.createElement(i.a,null,"Loading..."),persistor:et},c.createElement(Xe,null)))}),null),rt)}},[[105,1,2]]]);
//# sourceMappingURL=main.008d765a.chunk.js.map